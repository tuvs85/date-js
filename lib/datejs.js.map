{"version":3,"file":"datejs.js","sources":["../src/module/formatTime.js","../src/module/upZero.js","../src/module/formatTimeZone.js","../src/index.js","../src/module/formatConfig.js","../src/module/fixNumber.js","../src/module/isDateJs.js"],"sourcesContent":["function formatTime(time){\n  if (!time)return new Date();\n  if ((typeof time).toLowerCase() === 'number'){\n    return new Date(((time).toString().length === 10)?(time * 1000): time)\n  }\n  if (!Number.isNaN(Number(time))){\n    return new Date(Number(time));\n  }\n  return new Date(time);\n}\nexport default formatTime\n","function upZero(value){\n  if (!value)return '00';\n  if (value.toString().length>=2)return String(value);\n  return `0${value}`\n}\nexport default upZero\n","const zoneMap = {\n\n}\nfunction formatTimeZone(timezone){\n  if ((typeof timezone).toLowerCase() === 'number'){\n    return timezone\n  }\n  if (Number.isNaN(Number(timezone))){\n    return zoneMap[timezone]\n  }\n  return Number(timezone)\n}\nexport default formatTimeZone\n","import formatTime from \"./module/formatTime\";\nimport formatConfig from \"./module/formatConfig\";\nimport upZero from \"./module/upZero\";\nimport upTime from \"./module/upTime\";\nimport formatTimeZone from \"./module/formatTimeZone\";\nimport isDateJs from \"./module/isDateJs\";\nimport fixNumber from \"./module/fixNumber\";\n\nclass DateJs{\n  constructor(time, config) {\n    DateJs.prototype.defaultConfig = {\n      zone: -(new Date().getTimezoneOffset() / 60)\n    }\n    DateJs.prototype.time = formatTime(time) || Date.now();\n    DateJs.prototype.config = {\n      ...this.defaultConfig,\n      ...(formatConfig(config))\n    }\n    DateJs.prototype.__isDate__ = true;\n    this.init()\n  }\n  init(){\n    const date = this.format();\n    ({\"$Y\":this.$Y,\n      \"$M\": this.$M,\n      \"$D\": this.$D,\n      \"$h\": this.$h,\n      \"$m\": this.$m,\n      \"$s\": this.$s,\n      \"$S\": this.$S,\n      \"$stamps\": this.$stamps,\n      \"$stamp\": this.$stamp,\n      \"$z\": this.$z\n    } = {\n      \"$Y\": upZero(date.getFullYear()),\n      \"$M\": upZero(date.getMonth()+1),\n      \"$D\": upZero(date.getDate()),\n      \"$h\": upZero(date.getHours()),\n      \"$m\": upZero(date.getMinutes()),\n      \"$s\": upZero(date.getSeconds()),\n      \"$S\": upZero(date.getMilliseconds()),\n      \"$stamps\": date.getTime(),\n      \"$stamp\": parseInt(date.getTime() / 1000),\n      \"$z\": this.config.zone\n    });\n  }\n  toZone(timezone = ''){\n    if (!String(timezone).length) {\n      this.config.zone = this.defaultConfig.zone;\n      return this;\n    };\n    this.config.zone = formatTimeZone(timezone)\n    return this;\n  }\n  format(format) {\n    if (!format) return new Date(this.time);\n    let date = new Date(this.time);\n    if (Number(this.config.zone) !== Number(this.defaultConfig.zone)){\n      date = new Date(date.getTime() + ((this.config.zone - this.defaultConfig.zone) * 60 * 60 * 1000));\n    }\n    const time = {\n      \"YY\": date.getFullYear().toString().slice(2),\n      \"YYYY\": date.getFullYear(),\n      \"MM\": upZero(date.getMonth()+1),\n      \"DD\": upZero(date.getDate()),\n      \"hh\": upZero(date.getHours()),\n      \"mm\": upZero(date.getMinutes()),\n      \"ss\": upZero(date.getSeconds()),\n      \"SS\": upZero(date.getMilliseconds().toString().slice(0,2)),\n      \"SSS\": upZero(date.getMilliseconds()),\n    }\n    return format.replace(/YYYY/g, time.YYYY)\n      .replace(/YY/g, time.YY)\n      .replace(/MM/g, time.MM)\n      .replace(/DD/g, time.DD)\n      .replace(/hh/g, time.hh)\n      .replace(/mm/g, time.mm)\n      .replace(/ss/g, time.ss)\n      .replace(/SSS/g, time.SSS)\n      .replace(/SS/g, time.SS);\n  }\n  stamp(){\n    return new Date(this.format(this.config.format)).getTime();\n  }\n\n  add(value) {\n    /*\n    * add 添加函数时间，接受数值、对象格式\n    * 传递数值时  默认当传递为需要增加的小时，\n    * 传递对象时，  进行数据兼容覆盖处理，\n    * 判断是否有day、hour、minute、second\n    * 如果有时 添加对应的时间，并且重新返回出去。\n    *\n    *\n    * */\n    let addObj = {\n      hour: value\n    }\n    if ((typeof value).toLowerCase() === 'object') {\n      delete addObj.hour;\n      addObj = value;\n      for (let z in addObj){\n        addObj[z] = fixNumber(addObj[z])\n      }\n    }\n    if (addObj.day) {\n      this.time = new Date(this.time).getTime() + (addObj.day * 24 * 60 * 60 * 1000)\n    }\n    if (addObj.hour) {\n      this.time = new Date(this.time).getTime() + (addObj.hour * 60 * 60 * 1000)\n    }\n    if (addObj.minute) {\n      this.time = new Date(this.time).getTime() + (addObj.minute * 60 * 1000)\n    }\n    if (addObj.second) {\n      this.time = new Date(this.time).getTime() + (addObj.second * 1000)\n    }\n    return formatTime(this.time)\n  }\n  /*\n  *\n    countDown(downTime,format,autoCount = false){\n    downTime = upTime(downTime);\n    if (this.time >= downTime){\n      autoCount = false;\n    }\n    if (autoCount){\n      this.countDownTimes = setTimeout(()=>{\n        console.log('countDownTime')\n        DateJs.prototype.time = new Date(new Date(DateJs.prototype.time).getTime() + 1000);\n        this.countDown(downTime,format,autoCount)\n      }, 1000)\n    }\n    if (!format){\n      if (!downTime){\n        return 0;\n      }\n      if (this.time - downTime <0){\n        return (downTime - this.time) / 1000;\n      }\n      return (this.time - downTime) / 1000;\n    }\n    let countTime = (this.time - downTime) / 1000;\n    if (countTime < 0){\n      countTime = (downTime - this.time) / 1000;\n    }\n    let d = upZero(parseInt(countTime / 60 / 60 / 24));\n    let h = upZero(parseInt(countTime / 60 / 60 % 24));\n    let m = upZero(parseInt(countTime / 60 % 60));\n    let s = upZero(parseInt(countTime % 60));\n    let formatMap = {\n      'DD': /DD/g.test(format),\n      'HH': /HH/g.test(format),\n      'mm': /mm/g.test(format),\n      'ss': /ss/g.test(format),\n    }\n    if (Object.values(formatMap).every(item=>item)){\n      return format.replace(/DD/g, d).replace(/HH/g, h).replace(/mm/g, m).replace(/ss/g, s);\n    }\n    if (formatMap['DD']){\n      return format.replace(/DD/g, d);\n    }else{\n      if (formatMap['HH']){\n        return format.replace(/HH/g, parseInt(countTime / 3600)).replace(/mm/g, m).replace(/ss/g, s);\n      }\n      if (formatMap['mm']){\n        return format.replace(/mm/g, parseInt(countTime / 60)).replace(/ss/g, s);\n      }\n      if (formatMap['ss']){\n        return format.replace(/ss/g, parseInt(countTime))\n      }\n    }\n  }\n  stopCountDown(){\n    if (this.countDownTimes){\n      clearTimeout(this.countDownTimes)\n    }\n  }\n  * */\n}\nfunction dateJs(time,config){\n  if (time!== window && isDateJs(time)){\n    return time;\n  }\n  return new DateJs(time,config)\n}\nexport default dateJs;\n","function formatConfig(config){\n  if ((typeof config).toLowerCase() === 'number'){\n    return {\n      zone: config\n    }\n  }\n  if ((typeof config).toLowerCase() === 'string'){\n\n    // if (zoneMap[config]){\n    //   return {\n    //     zone: zoneMap[config]\n    //   }\n    // }\n  }\n  return config;\n}\nexport default formatConfig\n","export default function fixNumber(num){\n  if ((typeof num).toLowerCase() === 'string'){\n    num = parseFloat(num)\n  }\n  if (!Number.isInteger(num)){\n    num = Number(num.toFixed(4))\n  }\n  return num;\n}\n","function isDateJs(t){\n  if ((typeof t).toLowerCase() === 'object'){\n    if (t.__isDate__){\n      return true;\n    }\n    return false;\n  }\n  return false;\n}\nexport default isDateJs\n"],"names":["formatTime","time","_typeof","toLowerCase","Date","toString","length","Number","isNaN","upZero","value","String","zoneMap","DateJs","config","prototype","defaultConfig","zone","getTimezoneOffset","now","this","__isDate__","init","date","format","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getTime","parseInt","$Y","$M","$D","$h","$m","$s","$S","$stamps","$stamp","$z","timezone","slice","replace","YYYY","YY","MM","DD","hh","mm","ss","SSS","SS","num","addObj","hour","z","parseFloat","isInteger","toFixed","day","minute","second","window","t"],"mappings":"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"}