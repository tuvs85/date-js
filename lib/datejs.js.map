{"version":3,"file":"datejs.js","sources":["../src/module/upZero.js","../src/module/formatTimeZone.js","../src/index.js","../src/module/formatTime.js","../src/module/formatConfig.js","../src/module/isDateJs.js"],"sourcesContent":["function upZero(value){\n  if (!value)return '00';\n  if (value.toString().length>=2)return String(value);\n  return `0${value}`\n}\nexport default upZero\n","const zoneMap = {\n\n}\nfunction formatTimeZone(timezone){\n  if ((typeof timezone).toLowerCase() === 'number'){\n    return timezone\n  }\n  if (Number.isNaN(Number(timezone))){\n    return zoneMap[timezone]\n  }\n  return Number(timezone)\n}\nexport default formatTimeZone\n","import formatTime from \"./module/formatTime\";\nimport formatConfig from \"./module/formatConfig\";\nimport upZero from \"./module/upZero\";\nimport upTime from \"./module/upTime\";\nimport formatTimeZone from \"./module/formatTimeZone\";\nimport isDateJs from \"./module/isDateJs\";\n\nclass DateJs{\n  constructor(time, config) {\n    DateJs.prototype.defaultConfig = {\n      zone: -(new Date().getTimezoneOffset() / 60)\n    }\n    DateJs.prototype.time = formatTime(time) || Date.now();\n    DateJs.prototype.config = {\n      ...this.defaultConfig,\n      ...(formatConfig(config))\n    }\n    DateJs.prototype.__isDate__ = true;\n    this.init()\n  }\n  init(){\n    const date = this.format();\n    ({\"$Y\":this.$Y,\n      \"$M\": this.$M,\n      \"$D\": this.$D,\n      \"$h\": this.$h,\n      \"$m\": this.$m,\n      \"$s\": this.$s,\n      \"$S\": this.$S,\n      \"$stamps\": this.$stamps,\n      \"$stamp\": this.$stamp,\n      \"$z\": this.$z\n    } = {\n      \"$Y\": upZero(date.getFullYear()),\n      \"$M\": upZero(date.getMonth()),\n      \"$D\": upZero(date.getDate()),\n      \"$h\": upZero(date.getHours()),\n      \"$m\": upZero(date.getMinutes()),\n      \"$s\": upZero(date.getSeconds()),\n      \"$S\": upZero(date.getMilliseconds()),\n      \"$stamps\": date.getTime(),\n      \"$stamp\": parseInt(date.getTime() / 1000),\n      \"$z\": this.config.zone\n    });\n  }\n  toZone(timezone = ''){\n    if (!String(timezone).length) {\n      this.config.zone = this.defaultConfig.zone;\n      return this;\n    };\n    this.config.zone = formatTimeZone(timezone)\n    return this;\n  }\n  format(format) {\n    if (!format) return new Date(this.time);\n    let date = new Date(this.time);\n    if (Number(this.config.zone) !== Number(this.defaultConfig.zone)){\n      date = new Date(date.getTime() + ((this.config.zone - this.defaultConfig.zone) * 60 * 60 * 1000));\n    }\n    const time = {\n      \"YY\": date.getFullYear().toString().slice(2),\n      \"YYYY\": date.getFullYear(),\n      \"MM\": upZero(date.getMonth()),\n      \"DD\": upZero(date.getDate()),\n      \"hh\": upZero(date.getHours()),\n      \"mm\": upZero(date.getMinutes()),\n      \"ss\": upZero(date.getSeconds()),\n      \"SS\": upZero(date.getMilliseconds().toString().slice(0,2)),\n      \"SSS\": upZero(date.getMilliseconds()),\n    }\n    return format.replace(/YYYY/g, time.YYYY)\n      .replace(/YY/g, time.YY)\n      .replace(/MM/g, time.MM)\n      .replace(/DD/g, time.DD)\n      .replace(/hh/g, time.hh)\n      .replace(/mm/g, time.mm)\n      .replace(/ss/g, time.ss)\n      .replace(/SSS/g, time.SSS)\n      .replace(/SS/g, time.SS);\n  }\n  stamp(){\n    return new Date(this.format(this.config.format)).getTime();\n  }\n  /*\n  *\n    countDown(downTime,format,autoCount = false){\n    downTime = upTime(downTime);\n    if (this.time >= downTime){\n      autoCount = false;\n    }\n    if (autoCount){\n      this.countDownTimes = setTimeout(()=>{\n        console.log('countDownTime')\n        DateJs.prototype.time = new Date(new Date(DateJs.prototype.time).getTime() + 1000);\n        this.countDown(downTime,format,autoCount)\n      }, 1000)\n    }\n    if (!format){\n      if (!downTime){\n        return 0;\n      }\n      if (this.time - downTime <0){\n        return (downTime - this.time) / 1000;\n      }\n      return (this.time - downTime) / 1000;\n    }\n    let countTime = (this.time - downTime) / 1000;\n    if (countTime < 0){\n      countTime = (downTime - this.time) / 1000;\n    }\n    let d = upZero(parseInt(countTime / 60 / 60 / 24));\n    let h = upZero(parseInt(countTime / 60 / 60 % 24));\n    let m = upZero(parseInt(countTime / 60 % 60));\n    let s = upZero(parseInt(countTime % 60));\n    let formatMap = {\n      'DD': /DD/g.test(format),\n      'HH': /HH/g.test(format),\n      'mm': /mm/g.test(format),\n      'ss': /ss/g.test(format),\n    }\n    if (Object.values(formatMap).every(item=>item)){\n      return format.replace(/DD/g, d).replace(/HH/g, h).replace(/mm/g, m).replace(/ss/g, s);\n    }\n    if (formatMap['DD']){\n      return format.replace(/DD/g, d);\n    }else{\n      if (formatMap['HH']){\n        return format.replace(/HH/g, parseInt(countTime / 3600)).replace(/mm/g, m).replace(/ss/g, s);\n      }\n      if (formatMap['mm']){\n        return format.replace(/mm/g, parseInt(countTime / 60)).replace(/ss/g, s);\n      }\n      if (formatMap['ss']){\n        return format.replace(/ss/g, parseInt(countTime))\n      }\n    }\n  }\n  stopCountDown(){\n    if (this.countDownTimes){\n      clearTimeout(this.countDownTimes)\n    }\n  }\n  * */\n}\nfunction dateJs(time,config){\n  if (isDateJs(this)){\n    return time;\n  }\n  return new DateJs(time,config)\n}\nexport default dateJs;\n","function formatTime(time){\n  if (!time)return new Date();\n  if ((typeof time).toLowerCase() === 'number'){\n    return new Date(((time).toString().length === 10)?(time * 1000): time)\n  }\n  if (!Number.isNaN(Number(time))){\n    return new Date(Number(time));\n  }\n  return new Date(time);\n}\nexport default formatTime\n","function formatConfig(config){\n  if ((typeof config).toLowerCase() === 'number'){\n    return {\n      zone: config\n    }\n  }\n  if ((typeof config).toLowerCase() === 'string'){\n\n    // if (zoneMap[config]){\n    //   return {\n    //     zone: zoneMap[config]\n    //   }\n    // }\n  }\n  return config;\n}\nexport default formatConfig\n","function isDateJs(t){\n  if ((typeof t).toLowerCase() === 'object'){\n    if (t.__isDate__){\n      return true;\n    }\n    return false;\n  }\n  return false;\n}\nexport default isDateJs\n"],"names":["upZero","value","toString","length","String","zoneMap","DateJs","time","config","prototype","defaultConfig","zone","Date","getTimezoneOffset","_typeof","toLowerCase","Number","isNaN","now","this","__isDate__","init","date","format","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getTime","parseInt","$Y","$M","$D","$h","$m","$s","$S","$stamps","$stamp","$z","timezone","slice","replace","YYYY","YY","MM","DD","hh","mm","ss","SSS","SS","t"],"mappings":"0xCAAA,SAASA,EAAOC,UACTA,EACwB,GAAzBA,EAAMC,WAAWC,OAAiBC,OAAOH,cAClCA,GAFO,KCDpB,IAAMI,EAAU,OCOVC,wBACQC,EAAMC,yGAChBF,EAAOG,UAAUC,cAAgB,CAC/BC,OAAQ,IAAIC,MAAOC,oBAAsB,IAE3CP,EAAOG,UAAUF,OCZDA,EDYmBA,GCVD,WAAhCO,EAAQP,GAAMQ,cACT,IAAIH,KAAmC,KAA5BL,EAAML,WAAWC,OAAuB,IAAPI,EAAcA,GAE9DS,OAAOC,MAAMD,OAAOT,IAGlB,IAAIK,KAAKL,GAFP,IAAIK,KAAKI,OAAOT,IALR,IAAIK,ODWyBA,KAAKM,MACjDZ,EAAOG,UAAUD,cACZW,KAAKT,eEb0B,WAAlCI,EADgBN,EFeCA,GEdDO,cACX,CACLJ,KAAMH,IAGNM,EAAQN,GAAQO,cAQbP,IFGLF,EAAOG,UAAUW,WAAY,OACxBC,iEAGCC,EAAOH,KAAKI,WAWd,IACIvB,EAAOsB,EAAKE,kBACZxB,EAAOsB,EAAKG,eACZzB,EAAOsB,EAAKI,cACZ1B,EAAOsB,EAAKK,eACZ3B,EAAOsB,EAAKM,iBACZ5B,EAAOsB,EAAKO,iBACZ7B,EAAOsB,EAAKQ,2BACPR,EAAKS,iBACNC,SAASV,EAAKS,UAAY,QAC9BZ,KAAKX,OAAOG,WApBRsB,KAFR,QAGSC,KAHT,QAISC,KAJT,QAKSC,KALT,QAMSC,KANT,QAOSC,KAPT,QAQSC,KART,QAScC,UATd,aAUaC,SAVb,YAWSC,KAXT,qCAyBCC,mCAAW,UACXvC,OAAOuC,GAAUxC,YAIjBK,OAAOG,KD9C0B,WAApCG,EADkB6B,EC+CcA,GD9Cd5B,cACb4B,EAEL3B,OAAOC,MAAMD,OAAO2B,IACftC,EAAQsC,GAEV3B,OAAO2B,QCqCLnC,OAAOG,KAAOQ,KAAKT,cAAcC,KAIjCQ,oCAEFI,OACAA,EAAQ,OAAO,IAAIX,KAAKO,KAAKZ,UAC9Be,EAAO,IAAIV,KAAKO,KAAKZ,MACrBS,OAAOG,KAAKX,OAAOG,QAAUK,OAAOG,KAAKT,cAAcC,QACzDW,EAAO,IAAIV,KAAKU,EAAKS,UAA4D,IAA9CZ,KAAKX,OAAOG,KAAOQ,KAAKT,cAAcC,MAAa,GAAK,MAEvFJ,EAAO,IACLe,EAAKE,cAActB,WAAW0C,MAAM,QAClCtB,EAAKE,iBACPxB,EAAOsB,EAAKG,eACZzB,EAAOsB,EAAKI,cACZ1B,EAAOsB,EAAKK,eACZ3B,EAAOsB,EAAKM,iBACZ5B,EAAOsB,EAAKO,iBACZ7B,EAAOsB,EAAKQ,kBAAkB5B,WAAW0C,MAAM,EAAE,QAChD5C,EAAOsB,EAAKQ,2BAEdP,EAAOsB,QAAQ,QAAStC,EAAKuC,MACjCD,QAAQ,MAAOtC,EAAKwC,IACpBF,QAAQ,MAAOtC,EAAKyC,IACpBH,QAAQ,MAAOtC,EAAK0C,IACpBJ,QAAQ,MAAOtC,EAAK2C,IACpBL,QAAQ,MAAOtC,EAAK4C,IACpBN,QAAQ,MAAOtC,EAAK6C,IACpBP,QAAQ,OAAQtC,EAAK8C,KACrBR,QAAQ,MAAOtC,EAAK+C,2CAGhB,IAAI1C,KAAKO,KAAKI,OAAOJ,KAAKX,OAAOe,SAASQ,sDA+DrD,SAAgBxB,EAAKC,SG/Ic,WAA7BM,EADYyC,EHiJHpC,MGhJEJ,eACTwC,EAAEnC,UHgJCb,EAEF,IAAID,EAAOC,EAAKC,GGpJzB,IAAkB+C"}
