{"version":3,"file":"datejs.js","sources":["../src/module/toDate.js","../src/module/formatTime.js","../src/module/upZero.js","../src/module/toNumber.js","../src/module/formatTimeZone.js","../src/index.js","../src/module/formatConfig.js","../src/module/fixNumber.js","../src/module/isDateJs.js"],"sourcesContent":["function toDate(time){\n  if ((typeof time).toLowerCase() === 'object')return time;\n  return new Date(time);\n}\nexport default toDate\n","import toDate from \"./toDate\";\nfunction formatTime(time){\n  if (!time)return new Date();\n  if ((typeof time).toLowerCase() === 'number'){\n    return toDate(((time).toString().length === 10)?(time * 1000): time)\n  }\n  if (!Number.isNaN(Number(time))){\n    return toDate(Number(time));\n  }\n  return toDate(time);\n}\nexport default formatTime\n","function upZero(value){\n  if (!value)return '00';\n  if (value.toString().length>=2)return String(value);\n  return `0${value}`\n}\nexport default upZero\n","function toNumber(value){\n  if ((typeof value).toLowerCase() === 'number' )return value;\n  return parseFloat(value);\n}\nexport default toNumber\n","import toNumber from \"./toNumber\";\nconst zoneMap = {\n\n}\nfunction formatTimeZone(timezone){\n  if ((typeof timezone).toLowerCase() === 'number'){\n    return timezone\n  }\n  if (Number.isNaN(Number(timezone))){\n    return zoneMap[timezone]\n  }\n  return toNumber(timezone)\n}\nexport default formatTimeZone\n","import formatTime from \"./module/formatTime\";\nimport formatConfig from \"./module/formatConfig\";\nimport upZero from \"./module/upZero\";\nimport upTime from \"./module/upTime\";\nimport formatTimeZone from \"./module/formatTimeZone\";\nimport isDateJs from \"./module/isDateJs\";\nimport fixNumber from \"./module/fixNumber\";\nimport toDate from \"./module/toDate\";\nimport toNumber from \"./module/toNumber\";\n\nclass DateJs{\n  constructor(time, config) {\n    DateJs.prototype.defaultConfig = {\n      zone: -(toDate().getTimezoneOffset() / 60)\n    }\n    DateJs.prototype.time = formatTime(time) || Date.now();\n    DateJs.prototype.config = {\n      ...this.defaultConfig,\n      ...(formatConfig(config))\n    }\n    DateJs.prototype.__isDate__ = true;\n    this.init()\n  }\n  init(){\n    const date = this.format();\n    ({\"$Y\":this.$Y,\n      \"$M\": this.$M,\n      \"$D\": this.$D,\n      \"$h\": this.$h,\n      \"$m\": this.$m,\n      \"$s\": this.$s,\n      \"$S\": this.$S,\n      \"$stamps\": this.$stamps,\n      \"$stamp\": this.$stamp,\n      \"$z\": this.$z\n    } = {\n      \"$Y\": upZero(date.getFullYear()),\n      \"$M\": upZero(date.getMonth()+1),\n      \"$D\": upZero(date.getDate()),\n      \"$h\": upZero(date.getHours()),\n      \"$m\": upZero(date.getMinutes()),\n      \"$s\": upZero(date.getSeconds()),\n      \"$S\": upZero(date.getMilliseconds()),\n      \"$stamps\": date.getTime(),\n      \"$stamp\": parseInt(date.getTime() / 1000),\n      \"$z\": this.config.zone\n    });\n  }\n  toZone(timezone = ''){\n    if (!String(timezone).length) {\n      this.config.zone = this.defaultConfig.zone;\n      return this;\n    };\n    this.config.zone = formatTimeZone(timezone)\n    return this;\n  }\n  format(format) {\n    if (!format) return toDate(this.time);\n    let date = toDate(this.time);\n    if (toNumber(this.config.zone) !== toNumber(this.defaultConfig.zone)){\n      date = toDate(date.getTime() + ((this.config.zone - this.defaultConfig.zone) * 60 * 60 * 1000));\n    }\n    const time = {\n      \"YY\": date.getFullYear().toString().slice(2),\n      \"YYYY\": date.getFullYear(),\n      \"MM\": upZero(date.getMonth()+1),\n      \"DD\": upZero(date.getDate()),\n      \"hh\": upZero(date.getHours()),\n      \"mm\": upZero(date.getMinutes()),\n      \"ss\": upZero(date.getSeconds()),\n      \"SS\": upZero(date.getMilliseconds().toString().slice(0,2)),\n      \"SSS\": upZero(date.getMilliseconds()),\n    }\n    return format.replace(/YYYY/g, time.YYYY)\n      .replace(/YY/g, time.YY)\n      .replace(/MM/g, time.MM)\n      .replace(/DD/g, time.DD)\n      .replace(/hh/g, time.hh)\n      .replace(/mm/g, time.mm)\n      .replace(/ss/g, time.ss)\n      .replace(/SSS/g, time.SSS)\n      .replace(/SS/g, time.SS);\n  }\n  stamp(){\n    return toDate(this.format(this.config.format)).getTime();\n  }\n\n  add(value) {\n    /*\n    * add 添加函数时间，接受数值、对象格式\n    * 传递数值时  默认当传递为需要增加的小时，\n    * 传递对象时，  进行数据兼容覆盖处理，\n    * 判断是否有day、hour、minute、second\n    * 如果有时 添加对应的时间，并且重新返回出去。\n    *\n    *\n    * */\n    let addObj = {\n      hour: value\n    }\n    if ((typeof value).toLowerCase() === 'object') {\n      delete addObj.hour;\n      addObj = value;\n      for (let z in addObj){\n        addObj[z] = fixNumber(addObj[z])\n      }\n    }\n    if (addObj.day) {\n      this.time = toDate(this.time).getTime() + (addObj.day * 24 * 60 * 60 * 1000)\n    }\n    if (addObj.hour) {\n      this.time = toDate(this.time).getTime() + (addObj.hour * 60 * 60 * 1000)\n    }\n    if (addObj.minute) {\n      this.time = toDate(this.time).getTime() + (addObj.minute * 60 * 1000)\n    }\n    if (addObj.second) {\n      this.time = toDate(this.time).getTime() + (addObj.second * 1000)\n    }\n    return formatTime(this.time)\n  }\n  /*\n  *\n    countDown(downTime,format,autoCount = false){\n    downTime = upTime(downTime);\n    if (this.time >= downTime){\n      autoCount = false;\n    }\n    if (autoCount){\n      this.countDownTimes = setTimeout(()=>{\n        console.log('countDownTime')\n        DateJs.prototype.time = toDate(toDate(DateJs.prototype.time).getTime() + 1000);\n        this.countDown(downTime,format,autoCount)\n      }, 1000)\n    }\n    if (!format){\n      if (!downTime){\n        return 0;\n      }\n      if (this.time - downTime <0){\n        return (downTime - this.time) / 1000;\n      }\n      return (this.time - downTime) / 1000;\n    }\n    let countTime = (this.time - downTime) / 1000;\n    if (countTime < 0){\n      countTime = (downTime - this.time) / 1000;\n    }\n    let d = upZero(parseInt(countTime / 60 / 60 / 24));\n    let h = upZero(parseInt(countTime / 60 / 60 % 24));\n    let m = upZero(parseInt(countTime / 60 % 60));\n    let s = upZero(parseInt(countTime % 60));\n    let formatMap = {\n      'DD': /DD/g.test(format),\n      'HH': /HH/g.test(format),\n      'mm': /mm/g.test(format),\n      'ss': /ss/g.test(format),\n    }\n    if (Object.values(formatMap).every(item=>item)){\n      return format.replace(/DD/g, d).replace(/HH/g, h).replace(/mm/g, m).replace(/ss/g, s);\n    }\n    if (formatMap['DD']){\n      return format.replace(/DD/g, d);\n    }else{\n      if (formatMap['HH']){\n        return format.replace(/HH/g, parseInt(countTime / 3600)).replace(/mm/g, m).replace(/ss/g, s);\n      }\n      if (formatMap['mm']){\n        return format.replace(/mm/g, parseInt(countTime / 60)).replace(/ss/g, s);\n      }\n      if (formatMap['ss']){\n        return format.replace(/ss/g, parseInt(countTime))\n      }\n    }\n  }\n  stopCountDown(){\n    if (this.countDownTimes){\n      clearTimeout(this.countDownTimes)\n    }\n  }\n  * */\n}\nfunction dateJs(time,config){\n  if (time!== window && isDateJs(time)){\n    return time;\n  }\n  return new DateJs(time,config)\n}\nexport default dateJs;\n","function formatConfig(config){\n  if ((typeof config).toLowerCase() === 'number'){\n    return {\n      zone: config\n    }\n  }\n  if ((typeof config).toLowerCase() === 'string'){\n\n    // if (zoneMap[config]){\n    //   return {\n    //     zone: zoneMap[config]\n    //   }\n    // }\n  }\n  return config;\n}\nexport default formatConfig\n","import toNumber from \"./toNumber\";\n\nexport default function fixNumber(num){\n  /*\n  * 过滤纠正浮点数，如果是浮点数的话， 过滤4位 然后返回出去。\n  *\n  * */\n  if ((typeof num).toLowerCase() === 'string'){\n    num = toNumber(num)\n  }\n  if (!Number.isInteger(num)){\n    num = toNumber(num.toFixed(4))\n  }\n  return num;\n}\n","function isDateJs(t){\n  if ((typeof t).toLowerCase() === 'object'){\n    if (t.__isDate__){\n      return true;\n    }\n    return false;\n  }\n  return false;\n}\nexport default isDateJs\n"],"names":["toDate","time","_typeof","toLowerCase","Date","formatTime","toString","length","Number","isNaN","upZero","value","String","toNumber","parseFloat","zoneMap","DateJs","config","prototype","defaultConfig","zone","getTimezoneOffset","now","this","__isDate__","init","date","format","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getTime","parseInt","$Y","$M","$D","$h","$m","$s","$S","$stamps","$stamp","$z","timezone","slice","replace","YYYY","YY","MM","DD","hh","mm","ss","SSS","SS","num","addObj","hour","z","isInteger","toFixed","day","minute","second","window","t"],"mappings":"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"}